name: SLSA Docker Builder
on: [push, workflow_dispatch]

permissions:
  id-token: write
  contents: write
  actions: read
  packages: write # For GHCR push

jobs:
  build:
    uses: slsa-framework/slsa-github-generator/.github/workflows/builder_container-based_slsa3.yml@v2.1.0
    with:
      builder-image: "docker"
      builder-digest: "sha256:d95427251fd155cd69a03311a8c4edf6d0778595444afc2d2c800a156eb2ecac"
      config-path: "images/bitcoind/config.toml" # ‚Üê Path from repo root
      registry-username: ${{ github.actor }}
    secrets:
      registry-password: ${{ secrets.GITHUB_TOKEN }}
